<!DOCTYPE html>
<html>
<head>
    <title>Chat Room for Tong'er</title>
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=ZCOOL+KuaiLe&display=swap" rel="stylesheet">

    <!-- 第二部分：CSS 样式将会粘贴在这里 -->
</head>
        <style>
        :root {
            --bg-color: #f0f2f5;
            --panel-bg: #ffffff;
            --accent-color: #5dade2;
            --text-color: #0d0d0d;
            --secondary-text: #65676b;
            --border-color: #ced0d4;
            --my-message-bg: #5dade2;
            --their-message-bg: #e4e6eb;
            --private-msg-bg: #fffbe6;
            --private-msg-text-color: #333; /* 私信文字颜色 */
            --display-font: 'ZCOOL KuaiLe', cursive;
        }
        /* --- 这是要粘贴进去的新代码 --- */
body[data-theme='cat-theme'] {
    --bg-color: #fff5f8;
    --panel-bg: rgba(255, 255, 255, 0.9);
    --accent-color: #ff85a2;
    --text-color: #4a4a4a;
    --secondary-text: #b5a5d8;
    --border-color: #ffc2d4;
    /* ✨ 新的精致气泡资源 (Base64 内嵌) */
    --my-message-bg-image: url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjAiIGhlaWdodD0iNTYiIHZpZXdCb3g9IjAgMCA2MCA1NiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGcgc3R5bGU9Im1peC1ibGVuZC1tb2RlOnNvZnQtbGlnaHQiIG9wYWNpdHk9IjAuNSI+CjxlbGxpcHNlIGN4PSI0Ni45NTY1IiByeD0iMjAuOTU2NSIgdHJhbnNmb3JtPSJtYXRyaXgoMC44NjYwMjUgLTAuNSAwLjUgMC44NjYwMjUgMCAyMy40NzgzKSIgZmlsbD0iI0ZGRkZGRiIvPgo8L2c+CjxwYXRoIGQ9Ik0zMC4wODkgMEMxNC44MTQyIDAgMi4wODg5NiAxMS4xNjEyIDIuMDg4OTYgMjQuOTQzMUMyLjA4ODk2IDM4LjcyNSAxNC44MTQyIDQ5Ljg4NjIgMzAuMDg5IDQ5Ljg4NjJDNTAuNjA2IDQ5Ljg4NjIgNTggNDEuNTg1NyA1OCA0MS41ODU3QzU4IDI2LjY2NDcgNDUuMzYzMyAwIDMwLjA4OSAwWiIgZmlsbD0idXJsKCNwYWludDBfbGluZWFyXzIyMl8xMCkiLz4KPGcgZmlsdGVyPSJ1cmwoI2ZpbHRlcjBfZF8yMjJfMTApIj4KPHBhdGggZD0iTTUuMDg4OTYgMjQuOTQzMUM1LjA4ODk2IDEyLjgxODkgMTYuMjQ5IDMgMzAuMDg5IDNDNDMuOTI5MSAzIDU1IDExLjQ4MSA1NSAyNC45NDMxQzU1IDM1LjU1MjcgNDkuODQyMSAzOS44NzEgNDcuODk0NyA0MC44MzA0QzQ3LjU4MzMgNDAuOTg0MiA0Ni4wMDQ0IDQxLjk0MSA0NC4zMTE5IDQzLjA2MDVDNDEuNDg1MyA0NS4wMTI0IDM3LjIzODUgNDYuODg2MiAzMC4wODkgNDYuODg2MkMxNi4yNDkgNDYuODg2MiA1LjA4ODk2IDM3LjA2NzMgNS4wODg5NiAyNC45NDMxWiIgZmlsbD0iI0ZCQ0NFMCIvPgo8L2c+CjxkZWZzPgo8bGluZWFyR3JhZGllbnQgaWQ9InBhaW50MF9saW5lYXJfMjIyXzEwIiB4MT0iMi4wODg5NiIgeTE9IjI0Ljk0MzEiIHgyPSI1OCAgeTI9IjI0Ljk0MzEiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIj4KPHN0b3Agc3RvcC1jb2xvcj0iI0ZGQTJCOSIvPgo8c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IiNGRkNBRDAiLz4KPC9saW5lYXJHcmFkaWVudD4KPGZpbHRlciBpZD0iZmlsdGVyMF9kXzIyMl8xMCIgeDE9IjEuMDg4OTYiIHkxPSIwIiB4Mj0iNTkiIHkyPSI1MS44ODYyIiBmaWx0ZXJVbml0cz0idXNlclNwYWNlT25Vc2UiIGNvbG9yLWludGVycG9sYXRpb249InNMSU5FRUFSQkdCIj4KPGZlRmxvb2QgZmxvb2Qtb3BhY2l0eT0iMCIgcmVzdWx0PSJCYWNrZ3JvdW5kSW1hZ2VGaXgiLz4KPGZlQ29sb3JNYXRyaXggaW49IlNvdXJjZUFscGhhIiB0eXBlPSJtYXRyaXgiIHZhbHVlcz0iMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAxMjcgMCIgcmVzdWx0PSJoYXJkQWxwaGEiLz4KPGZlT2Zmc2V0IGR5PSIyIi8+CjxmZUdhdXNzaWFuQmx1ciBzdGREZXZpYXRpb249IjIiLz4KPGZlQ29tcG9zaXRlIGluMj0iaGFyZEFscGhhIiBvcGVyYXRvcj0ib3V0Ii8+CjxmZUNvbG9yTWF0cml4IHR5cGU9Im1hdHJpeCIgdmFsdWVzPSIwIDAgMCAwIDAuOTU2ODQxIDAgMCAwIDAgMC43NjA4MzMgMCAwIDAgMCAwLjg1Mzk1OCAwIDAgMCAwLjUgMCIvPgo8ZmVCbGVuZCBtb2RlPSJub3JtYWwiIGluMj0iQmFja2dyb3VuZEltYWdlRml4IiByZXN1bHQ9ImRyb3BTaGFkb3ciLz4KPGZlQmxlbmQgbW9kZT0ibm9ybWFsIiBpbj0iU291cmNlR3JhcGhpYyIgaW4yPSJkcm9wU2hhZG93IiByZXN1bHQ9InNoYXBlIi8+CjwvZmlsdGVyPgo8L2RlZnM+Cjwvc3ZnPgo=');
    --their-message-bg-image: url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjAiIGhlaWdodD0iNTYiIHZpZXdCb3g9IjAgMCA2MCA1NiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGcgc3R5bGU9Im1peC1ibGVuZC1tb2RlOnNvZnQtbGlnaHQiIG9wYWNpdHk9IjAuNSI+CjxlbGxpcHNlIGN4PSIxMy4wNDM1IiByeD0iMjAuOTU2NSIgdHJhbnNmb3JtPSJtYXRyaXgoLTAuODY2MDI1IC0wLjUgLTAuNSAwLjg2NjAyNSA1OS4yMTc0IDI1LjIxMTkpIiBmaWxsPSIjRkZGRkZGIi8+CjwvZz4KPHBhdGggZD0iTTI5LjkxMSAwQzQ1LjE4NTggMCA1Ny45MTEgMTEuMTYxMiA1Ny45MTEgMjQuOTQzMUM1Ny45MTEgMzguNzI1IDQ1LjE4NTggNDkuODg2MiAyOS45MTEgNDkuODg2MkMxNC4zOTQgNDkuODg2MiAyIDQxLjU4NTcgMiA0MS41ODU3QzIgMjYuNjY0NyAxNC42MzY3IDAgMjkuOTExIDBaIiBmaWxsPSJ3aGl0ZSIvPgo8ZyBmaWx0ZXI9InVybCgjZmlsdGVyMF9kXzIyMl8xNikiPgo8cGF0aCBkPSJNNTIuOTEzOSA1NC4wODc4QzU0LjM4MyA1Mi44ODIzIDU0Ljg3ODkgNTEuMjA0NiA1NS4wODkgNDkuNDQzMUM1Ni45ODQxIDMyLjkxNDQgNDguNTMzMiA2LjExMTE5IDMwLjA4OSA2LjExMTE5QzIzLjgyNTYgNi4xMTExOSAxNy44NTI3IDcuNjA5ODggMTIuNjY0MyAxMC4yNTgzQzExLjU5NzcgMTAuODQ2MiAxMC4xNTQ4IDExLjgxNSA4LjY4ODExIDEyLjkzOTVDNS41MTQ0OCAxNS40ODc2IDUgMTkuNjM4NyA1IDIzLjk0MzFDNSA0MC4yNzY1IDE3LjEzNDggNDkuODg2MiAyOS45MTEgNDkuODg2MkMzOC40MDk4IDQ5Ljg4NjIgNDUuNjk2NiA0Ni4zNjQzIDUwLjA4OSA0My4zMTM2QzUxLjY5MzcgNDIuMDM0NyA1Mi4yNTY5IDQxLjM2ODYgNTIuMjg0NiA0MS4zNDQyQzUzLjEzNyA0MC40OTE2IDU0Ljc4NzkgMzguMTM1MSA1Mi45MTM5IDU0LjA4NzhaIiBmaWxsPSJ3aGl0ZSIvPgo8L2c+CjxkZWZzPgo8ZmlsdGVyIGlkPSJmaWx0ZXJBX2ZfMjIyXzE2IiB4PSItMiIgeT0iMi4xMTExOCIgeDI9IjU5IiB5Mj0iNTguODg2MiIgZmlsdGVyVW5pdHM9InVzZXJTcGFjZU9uVXNlIiBjb2xvci1pbnRlcnBvbGF0aW9uPSJzUkdCIj4KPGZlRmxvb2QgZmxvb2Qtb3BhY2l0eT0iMCIgcmVzdWx0PSJCYWNrZ3JvdW5kSW1hZ2VGaXgiLz4KPGZlQmxlbmQgbW9kZT0ibm9ybWFsIiBpbj0iU291cmNlR3JhcGhpYyIgaW4yPSJCYWNrZ3JvdW5kSW1hZ2VGaXgiIHJlc3VsdD0ic2hhcGUiLz4KPC9maWx0ZXI+CjxmaWx0ZXIgaWQ9ImZpbHRlcjBfZF8yMjJfMTYiIHg9IjEiIHkxPSIyLjExMTE4IiB4Mj0iNTkiIHkyPSI1My44ODYyIiBmaWx0ZXJVbml0cz0idXNlclNwYWNlT25Vc2UiIGNvbG9yLWludGVycG9sYXRpb249InNMSU5FRUFSQkdCIj4KPGZlRmxvb2QgZmxvb2Qtb3BhY2l0eT0iMCIgcmVzdWx0PSJCYWNrZ3JvdW5kSW1hZ2VGaXgiLz4KPGZlQ29sb3JNYXRyaXggaW49IlNvdXJjZUFscGhhIiB0eXBlPSJtYXRyaXgiIHZhbHVlcz0iMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAxMjcgMCIgcmVzdWx0PSJoYXJkQWxwaGEiLz4KPGZlT2Zmc2V0IGR5PSIyIi8+CjxmZUdhdXNzaWFuQmx1ciBzdGREZXZpYXRpb249IjIiLz4KPGZlQ29tcG9zaXRlIGluMj0iaGFyZEFscGhhIiBvcGVyYXRvcj0ib3V0Ii8+CjxmZUNvbG9yTWF0cml4IHR5cGU9Im1hdHJpeCIgdmFsdWVzPSIwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwLjA1IDAiLz4KPGZlQmxlbmQgbW9kZT0ibm9ybWFsIiBpbjI9IkJhY2tncm91bmRJbWFnZUZpeCIgcmVzdWx0PSJkcm9wU2hhZG93Ii8+CjxmQmxlbmQgbW9kZT0ibm9ybWFsIiBpbj0iU291cmNlR3JhcGhpYyIgaW4yPSJkcm9wU2hhZG93IiByZXN1bHQ9InNoYXBlIi8+CjwvZmlsdGVyPgo8L2RlZnM+Cjwvc3ZnPgo=');
    --private-msg-bg-image: url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjAiIGhlaWdodD0iNTYiIHZpZXdCb3g9IjAgMCA2MCA1NiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGcgc3R5bGU9Im1peC1ibGVuZC1tb2RlOnNvZnQtbGlnaHQiIG9wYWNpdHk9IjAuNSI+CjxlbGxpcHNlIGN4PSIxMy4wNDM1IiByeD0iMjAuOTU2NSIgdHJhbnNmb3JtPSJtYXRyaXgoLTAuODY2MDI1IC0wLjUgLTAuNSAwLjg2NjAyNSA1OS4yMTc0IDI1LjIxMTkpIiBmaWxsPSIjRkZGRkZGIi8+CjwvZz4KPHBhdGggZD0iTTI5LjkxMSAwQzQ1LjE4NTggMCA1Ny45MTEgMTEuMTYxMiA1Ny45MTEgMjQuOTQzMUM1Ny45MTEgMzguNzI1IDQ1LjE4NTggNDkuODg2MiAyOS45MTEgNDkuODg2MkMxNC4zOTQgNDkuODg2MiAyIDQxLjU4NTcgMiA0MS45ODU3QzIgMjYuNjY0NyAxNC42MzY3IDAgMjkuOTExIDBaIiBmaWxsPSJ3aGl0ZSIvPgo8ZyBmaWx0ZXI9InVybCgjZmlsdGVyMF9kXzIyMl8yMCkiPgo8cGF0aCBkPSJNNTIuOTEzOSA1NC4wODc4QzU0LjM4MyA1Mi44ODIzIDU0Ljg3ODkgNTEuMjA0NiA1NS4wODkgNDkuNDQzMUM1Ni45ODQxIDMyLjkxNDQgNDguNTMzMiA2LjExMTE5IDMwLjA4OSA2LjExMTE5QzIzLjgyNTYgNi4xMTExOSAxNy44NTI3IDcuNjA5ODggMTIuNjY0MyAxMC4yNTgzQzExLjU5NzcgMTAuODQ2MiAxMC4xNTQ4IDExLjgxNSA4LjY4ODExIDEyLjkzOTVDNS41MTQ0OCAxNS40ODc2IDUgMTkuNjM4NyA1IDIzLjk0MzFDNSA0MC4yNzY1IDE3LjEzNDggNDkuODg2MiAyOS45MTEgNDkuODg2MkMzOC40MDk4IDQ5Ljg4NjIgNDUuNjk2NiA0Ni4zNjQzIDUwLjA4OSA0My4zMTM2QzUxLjY5MzcgNDIuMDM0NyA1Mi4yNTY5IDQxLjM2ODYgNTIuMjg0NiA0MS4zNDQyQzUzLjEzNyA0MC40OTE2IDU0Ljc4NzkgMzguMTM1MSA1Mi45MTM5IDU0LjA4NzhaIiBmaWxsPSJ1cmwoI3BhaW50MF9saW5lYXJfMjIyXzIwKSIvPgo8L2c+CjxkZWZzPgo8bGluZWFyR3JhZGllbnQgaWQ9InBhaW50MF9saW5lYXJfMjIyXzIwIiB4MT0iNSIgeTE9IjI5Ljk5OTkiIHgyPSI1NS4wODkiIHkyPSIyOS45OTk5IiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+CjxzdG9wIHN0b3AtY29sb3I9IiNBM0RBRjkiLz4KPHN0b3Agb2Zmc2V0PSIxIiBzdG9wLWNvbG9yPSIjRjBGMkFDİi8+CjwvbGluZWFyR3JhZGllbnQ+CjxmaWx0ZXIgaWQ9ImZpbHRlcjBfZF8yMjJfMjAiIHg9IjEiIHkxPSIyLjExMTE4IiB4Mj0iNTkiIHkyPSI1My44ODYyIiBmaWx0ZXJVbml0cz0idXNlclNwYWNlT25Vc2UiIGNvbG9yLWludGVycG9sYXRpb249InNMSU5FRUFSQkdCIj4KPGZlRmxvb2QgZmxvb2Qtb3BhY2l0eT0iMCIgcmVzdWx0PSJCYWNrZ3JvdW5kSW1hZ2VGaXgiLz4KPGZlQ29sb3JNYXRyaXggaW49IlNvdXJjZUFscGhhIiB0eXBlPSJtYXRyaXgiIHZhbHVlcz0iMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAxMjcgMCIgcmVzdWx0PSJoYXJkQWxwaGEiLz4KPGZlT2Zmc2V0IGR5PSIyIi8+CjxmZUdhdXNzaWFuQmx1ciBzdGREZXZpYXRpb249IjIiLz4KPGZlQ29tcG9zaXRlIGluMj0iaGFyZEFscGhhIiBvcGVyYXRvcj0ib3V0Ii8+CjxmZUNvbG9yTWF0cml4IHR5cGU9Im1hdHJpeCIgdmFsdWVzPSIwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwLjA1IDAiLz4KPGZlQmxlbmQgbW9kZT0ibm9ybWFsIiBpbjI9IkJhY2tncm91bmRJbWFnZUZpeCIgcmVzdWx0PSJkcm9wU2hhZG93Ii8+CjxmQmxlbmQgbW9kZT0ibm9ybWFsIiBpbj0iU291cmNlR3JhcGhpYyIgaW4yPSJkcm9wU2hhZG93IiByZXN1bHQ9InNoYXBlIi8+CjwvZmlsdGVyPgo8L2RlZnM+Cjwvc3ZnPgo=');
    --cat-image: url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgdmlld0JveD0iMCAwIDIwMCAyMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxwYXRoIGQ9Ik0zMyAxODVDMzMgMTk0LjM4OSAxNTYgMTk0IDE1NiAxODUiIGZpbGw9IiNDMkMyQzIiIHN0cm9rZT0iIzU2NTY1NiIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiLz4KPHBhdGggZD0iTTMzIDE4NEMzMyAxNzQuNjExIDE1NiAxNzUgMTU2IDE4NCIgZmlsbD0iI0QxRDJEMiIgc3Ryb2tlPSIjNTY1NjU2IiBzdHJva2Utd2lkdGg9IjIiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIvPgo8cGF0aCBkPSJNNzguMTA2NiA5MS4wMzk2Qzc4LjEwNjYgODkuMDAzOCA4Mi4xNDUzIDg5LjQ0MSA4Mi4xNDUzIDkxLjUzNDRDLTEzLjQ5NjIgODkuNDQxIDguOTIzNzkgODcuNDE5IDMzIDEwNSIgc3Ryb2tlPSIjNTY1NjU2IiBzdHJva2Utd2lkdGg9IjIiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIvPgo8cGF0aCBkPSJNMTE5LjA0NyA5MC41MzkxQzExOS4wNDcgODguNDgzMyAxMjMuMDgzIDg4LjkyMDUgMTIzLjA4MyA5MC42MDQ0QzY5LjQ4MjkgOTAuOTQ5MSAxMDkuMzc4IDg0LjU1NCAxNTYgMTA1IiBzdHJva2U9IiM1NjU2NTYiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIi8+CjxwYXRoIGQ9Ik0xNTYgMTg1VjEwNUMxNTYgNzEuNjY2NyAxMjMgNDggOTggNDhDNzMgNDggMzMgNzEuNjY2NyAzMyAxMDVWMTg1SDE1NloiIGZpbGw9IiNDMkMyQzIiIHN0cm9rZT0iIzU2NTY1NiIgc3Ryb2tlLXdpZHRoPSIyIi8+CjxnIGZpbHRlcj0idXJsKCNmaWx0ZXIwX2lfMC4yKSI+CjxwYXRoIGQ9Ik0zMyAxODVDMzMgMTk0LjM4OSAxNTYgMTk0IDE1NiAxODUiIGZpbGw9IiNDMkMyQzIiIHN0cm9rZT0iIzU2NTY1NiIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiLz4KPHBhdGggZD0iTTMzIDE4NEMzMyAxNzQuNjExIDE1NiAxNzUgMTU2IDE4NCIgZmlsbD0iI0QxRDJEMiIgc3Ryb2tlPSIjNTY1NjU2IiBzdHJva2Utd2lkdGg9IjIiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIvPgo8L2c+CjxwYXRoIGQ9Ik03Mi4zMzMzIDExMC4zMzNIMTI4LjY2N0MxMzQuMzc3IDExMC4zMzMgMTM5IDExNS40MzQgMTM5IDEyMS41MjdDMTM5IDEyMy44OTEgMTQwLjM4NyAxMjcuMzc0IDEzNy45MTkgMTI4LjM0N0MxMzIuNTgzIDEzMC40ODYgOTkuNDE5MSAxNDIuODEgNzIuMzMzMyAxMjkuNzA3QzY2Ljg5OTcgMTI3LjQ1NyA2NyAxMjMuMzMgNjcgMTIxLjUyN0M2NyAxMTUuNDM0IDcxLjYyMzQgMTEwLjMzMyA3Mi4zMzMzIDExMC4zMzNaIiBmaWxsPSIjRjIzMzVEIiBzdHJva2U9IiM1NjU2NTYiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIi8+CjxwYXRoIGQ9Ik0xMzguNjE0IDEzMy40OUMxMzMuMjQ0IDE0Mi4xMTkgMTIyLjI0MyAxNTIgOTggMTUyQzczLjc1NzYgMTUyIDYyLjc1NjQgMTQyLjExOSA1Ny4zODYgMTMzLjQ5QzQ4LjY2NTIgMTM3LjUzNyAzMyAxNTAuNDkgMzMgMTg1SDE1NkMxNTYgMTUwLjQ5IDE0Ny4zMzUgMTM3LjUzNyAxMzguNjE0IDEzMy40OVoiIGZpbGw9IiNEOUQ5RDkiIHN0cm9rZT0iIzU2NTY1NiIgc3Ryb2tlLXdpZHRoPSIyIi8+CjxwYXRoIGQ9Ik0xNTYgMTA1QzE1NiA3MS42NjY3IDEyMyA0OCAxMjMgNDhDNzMgNDggMzMgNzEuNjY2NyAzMyAxMDVDMzcgMTI4IDY4IDE0NyA5OCAxNDdDMTI4IDE0NyAxNDQgMTMxIDE1NCAxMDVIMTU2IiBmaWxsPSIjRERERCIvPgo8cGF0aCBkPSJNNzguMTA2NiA5MS4wMzk2Qzc4LjEwNjYgODkuMDAzOCA4Mi4xNDUzIDg5LjQ0MSA4Mi4xNDUzIDkxLjUzNDRDLTEzLjQ5NjIgODkuNDQxIDguOTIzNzkgODcuNDE5IDMzIDEwNSIgc3Ryb2tlPSIjNTY1NjU2IiBzdHJva2Utd2lkdGg9IjIiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIvPgo8cGF0aCBkPSJNMTE5LjA0NyA5MC41MzkxQzExOS4wNDcgODguNDgzMyAxMjMuMDgzIDg4LjkyMDUgMTIzLjA4MyA5MC42MDQ0QzY5LjQ4MjkgOTAuOTQ5MSAxMDkuMzc4IDg0LjU1NCAxNTYgMTA1IiBzdHJva2U9IiM1NjU2NTYiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIi8+CjxwYXRoIGQ9Ik0xNDYuMjY5IDY2LjgzMDdDMTQ2LjI2OSA2Ni44MzA3IDE0Mi44NjYgNjIuODMxOSAxMzcuNzY5IDYxLjMzMDdDMTMyLjY3MyA1OTgzOTUgMTMwIDI1IDEzMCAyNUMxMzAgMjUgMTQ1IDM5IDE0OS41IDM4LjVDMTU0IDM4IDE1MS41IDYyLjMzMDcgMTUxLjUgNjIuMzMwN0wxNDYuMjY5IDY2LjgzMDdaIiBmaWxsPSIjQzNDM0MzIiBzdHJva2U9IiM1NjU2NTYiIHN0cm9rZS13aWR0aD0iMiIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIi8+CjxwYXRoIGQ9Ik00OS43MzA4IDY2LjgzMDdDNDkuNzMwOCA2Ni44MzA3IDUzLjEzNDQgNjIuODMxOSA1OC4yMzA4IDYxLjMzMDdDNjMuMzI3MiA1OS44Mzk1IDY2IDI1IDY2IDI1QzY2IDI1IDUxIDM5IDQ2LjUgMzguNUM0MiAzOCAzNC41IDYyLjMzMDcgMzQuNSA2Mi4zMzA3TDQ5LjczMDggNjYuODMwN1oiIGZpbGw9IiNDM0MzQzMiIHN0cm9rZT0iIzU2NTY1NiIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiLz4KPHBhdGggZD0iTTk4IDExNUMxMDQgMTExIDEwMi4zMzMgMTA3LjY2NyAxMDIgMTA2QzEwMS42NjcgMTA0LjMzMyA5OC4zMzMzIDEwMy4zMzMgOTggMTA2Qzk3LjY2NjcgMTA4LjY2NyA5NiAxMDkgOTggMTE1WiIgZmlsbD0iI0ZGRkZGRiIgc3Ryb2tlPSIjNTY1NjU2IiBzdHJva2Utd2lkdGg9IjIiIHN0cm9rZS1saW5lY2FwPSJyb3VuZCIvPgo8cGF0aCBkPSJNNzggMTE4Qzc4IDExOCA4My4zMzMzIDEyMCA4NSAxMjFDLjg2LjY2NjcgMTIyIDg4IDEyNSA4NSAxMjdDNzIgMTMxIDExOSAxMzEgMTE1IDEyN0MxMTIgMTI1IDExMy4zMzMgMTIyIDExNSAxMjFDMTIwIDEyMCAxMjIgMTE4IDEyMiAxMThDNzggMTE4IDc4IDExOCA3OCAxMThaIiBmaWxsPSIjRkZGRkZGIiBzdHJva2U9IiM1NjU2NTYiIHN0cm9rZS13aWR0aD0iMiIvPgo8cGF0aCBkPSJNNjcgMTIxLjUyN0M2NyAxMjAuMjc4IDY4LjU4MTIgMTIwLjMzMyA3MSAxMjAuMzMzQzc0LjQ3NjMgMTIwLjMzMyA3OCAxMTggNzggMTE4QzgyLjczMjcgMTE4IDgzLjY2NjcgMTE5LjY2NyA4NSAxMjFDODYuMzMzMyAxMjIuMzMzIDg3IDEyNSA4NSAxMjdDNzkgMTI5LjQ4MSA4OC4zMzMzIDEzMyA5OCAxMzNDMTA3LjY2NyAxMzMgMTEwIDEzMSA5OS4xNTU0IDEyMy45MDdDODguMzMzMyAxMTYuNzEzIDEyMiAxMTggMTIyIDExOEMxMjIgMTE4IDEyOC4zMzMgMTEwIDEyOC42NjcgMTEwLjMzM0MxMzQuMzc3IDExMC4zMzMgMTM5IDExNS40MzQgMTM5IDEyMS41MjdDMTM5IDEyMy44OTEgMTQwLjM4NyAxMjcuMzc0IDEzNy45MTkgMTI4LjM0N0MxMzIuNTgzIDEzMC40ODYgOTkuNDE5MSAxNDIuODEgNzIuMzMzMyAxMjkuNzA3QzY2Ljg5OTcgMTI3LjQ1NyA2NyAxMjMuMzMgNjcgMTIxLjUyN1oiIGZpbGw9IiNGOEY4RjgiIHN0cm9rZT0iIzU2NTY1NiIgc3Ryb2tlLXdpZHRoPSIyIi8+CjxjaXJjbGUgY3g9IjgyIiBjeT0iMTEzIiByPSI0IiBmaWxsPSIjRkY5MDgxIiBzdHJva2U9IiM1NjU2NTYiIHN0cm9rZS13aWR0aD0iMiIvPgo8Y2lyY2xlIGN4PSIxMTgiIGN5PSIxMTMiIHI9IjQiIGZpbGw9IiNGRjkwODEiIHN0cm9rZT0iIzU2NTY1NiIgc3Ryb2tlLXdpZHRoPSIyIi8+CjxkZWZzPgo8ZmlsdGVyIGlkPSJmaWx0ZXIwX2lfMC4yIiB4PSIzMyIgeT0iMTc0IiB3aWR0aD0iMTIzIiBoZWlnaHQ9IjIxIiBmaWx0ZXJVbml0cz0idXNlclNwYWNlT25Vc2UiIGNvbG9yLWludGVycG9sYXRpb249InNSR0JCIj4KPGZlRmxvb2QgZmxvb2Qtb3BhY2l0eT0iMCIgcmVzdWx0PSJCYWNrZ3JvdW5kSW1hZ2VGaXgiLz4KPGZlQmxlbmQgbW9kZT0ibm9ybWFsIiBpbj0iU291cmNlR3JhcGhpYyIgaW4yPSJCYWNrZ3JvdW5kSW1hZ2VGaXgiIHJlc3VsdD0ic2hhcGUiLz4KPGZlQ29sb3JNYXRyaXggaW49IlNvdXJjZUFscGhhIiB0eXBlPSJtYXRyaXgiIHZhbHVlcz0iMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAxMjcgMCIgcmVzdWx0PSJoYXJkQWxwaGEiLz4KPGZlT2Zmc2V0IGR5PSItMSIvPgo8ZmVHYXVzc2lhbkJsdXIgc3RkRGV2aWF0aW9uPSIxLjUiLz4KPGZlQ29tcG9zaXRlIGluMj0iaGFyZEFscGhhIiBvcGVyYXRvcj0ib3V0Ii8+CjxmZUNvbG9yTWF0cml4IHR5cGU9Im1hdHJpeCIgdmFsdWVzPSIwIDAgMCAwIDEgMCAwIDAgMCAwLjgwMzkyMiAwIDAgMCAwIDAuODgzMzMzIDAgMCAwIDAuMjUgMCIvPgo8ZmVCbGVuZCBtb2RlPSJub3JtYWwiIGluMj0ic2hhcGUiIHJlc3VsdD0iaW5uZXJTaGFkb3ciLz4KPC9maWx0ZXI+CjwvZGVmcz4KPC9zdmc+Cg==');
}
        
        /* --- 基础与动画 --- */
        html, body { height: 100%; margin: 0; }
        body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif; display: flex; background-color: var(--bg-color); overflow: hidden; transition: background-color 0.5s ease; }
        #chat-container { display: flex; width: 100%; height: 100%; position: relative; z-index: 1; }
        @keyframes fall { 0% { top: -10%; opacity: 1; transform: translateX(0) rotate(0deg); } 100% { top: 110%; opacity: 0.5; transform: translateX(100px) rotate(360deg); } }
        @keyframes slideUp { to { opacity: 1; transform: translateY(0); } }

        /* --- 动态元素 --- */
        #flower-container { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: 0; pointer-events: none; }
        .flower { position: absolute; background-size: contain; background-repeat: no-repeat; background-image: url('https://api.iconify.design/vscode-icons/file-type-sakura.svg'); animation: fall linear infinite; }
        body::after { content: ''; position: fixed; z-index: -1; pointer-events: none; opacity: 0; transition: opacity 0.8s ease; right: -80px; bottom: -50px; width: 400px; height: 400px; background-image: url('https://www.freeiconspng.com/uploads/birthday-cake-icon-png-9.png'); background-size: contain; background-repeat: no-repeat; }
        body[data-theme='cat-theme']::after { opacity: 0.7; }

        /* --- 侧边栏完美布局 --- */
        #sidebar { width: 280px; background-color: var(--panel-bg); backdrop-filter: blur(10px); border-right: 1px solid var(--border-color); display: flex; flex-direction: column; padding: 20px; box-sizing: border-box; transition: all 0.5s ease; position: relative; height: 100%; }
        #sidebar h2 { margin: 0 0 20px 0; color: var(--text-color); border-bottom: 1px solid var(--border-color); padding-bottom: 10px; flex-shrink: 0; }
        #user-list { list-style-type: none; padding: 0; margin: 0; overflow-y: auto; flex-grow: 1; -webkit-overflow-scrolling: touch; }
        #user-list li { padding: 10px; border-radius: 12px; margin-bottom: 5px; color: var(--secondary-text); font-weight: 500; transition: background-color 0.2s; }
        #user-list li.can-chat:hover { background-color: rgba(0,0,0,0.05); cursor: pointer; }
        #sidebar::before { content: ''; position: absolute; bottom: 80px; right: 10px; width: 80px; height: 80px; background-image: url('https://api.iconify.design/flat-color-icons/cat.svg'); background-size: contain; background-repeat: no-repeat; opacity: 0; transition: opacity 0.5s 0.2s ease; transform: rotate(-15deg); pointer-events: none; }
        body[data-theme='cat-theme'] #sidebar::before { opacity: 0.9; }
        #theme-switcher { margin-top: auto; padding-top: 20px; border: none; background: transparent; color: var(--accent-color); cursor: pointer; font-weight: bold; text-align: center; font-size: 1.1em; flex-shrink: 0; }

        /* --- 聊天主窗口 --- */
        #main-chat { flex-grow: 1; display: flex; flex-direction: column; background-color: transparent; position: relative; height: 100%; }
        #main-chat::before { content: '桐儿生日快乐'; position: absolute; top: 50%; left: 50%; width: 100%; text-align: center; font-family: var(--display-font); font-size: 12vw; color: rgba(255, 192, 203, 0.2); transform: translate(-50%, -50%) rotate(-8deg); z-index: -1; pointer-events: none; opacity: 0; transition: opacity 0.8s ease; }
        body[data-theme='cat-theme'] #main-chat::before { opacity: 1; }
        #messages { flex-grow: 1; padding: 20px; overflow-y: auto; list-style-type: none; margin: 0; -webkit-overflow-scrolling: touch; display: flex; flex-direction: column; }

        /* --- 消息气泡完美修复 --- */
        #messages li { display: flex; flex-direction: column; margin-bottom: 12px; max-width: 75%; width: -moz-fit-content; width: fit-content; opacity: 0; transform: translateY(20px); animation: slideUp 0.4s forwards; }
        .message-bubble { padding: 12px 18px; border-radius: 18px; box-shadow: 0 2px 4px rgba(0,0,0,0.08); line-height: 1.5; word-break: break-all; }
        body[data-theme='cat-theme'] .message-bubble { clip-path: url(#cupcake-clip); padding: 25px 22px 22px; border-radius: 0; }
        li.my-message { align-self: flex-end; }
        li.their-message { align-self: flex-start; }
        .my-message .message-bubble { background: var(--my-message-bg); color: #fff; }
        .their-message .message-bubble { background-color: var(--their-message-bg); color: var(--text-color); }
        .private-message .message-bubble { background-color: var(--private-msg-bg); color: var(--private-msg-text-color) !important; border: 1px dashed var(--accent-color); }
        li.system-message { align-self: center; color: var(--secondary-text); font-style: italic; font-size: 0.9em; }
        .message-sender { font-weight: bold; margin-bottom: 5px; font-size: 0.9em; color: var(--secondary-text); padding: 0 5px; }
        
        /* --- 输入框 --- */
        #form { display: flex; padding: 20px; border-top: 1px solid var(--border-color); background-color: var(--panel-bg); backdrop-filter: blur(10px); flex-shrink: 0; }
        #input { border: 1px solid var(--border-color); background-color: var(--their-message-bg); padding: 10px 18px; flex-grow: 1; border-radius: 30px; margin-right: 10px; font-size: 1em; color: var(--text-color); }
        #input:focus { outline: none; border-color: var(--accent-color); }
        #form button { background: var(--accent-color); border: none; padding: 10px 20px; color: white; border-radius: 30px; cursor: pointer; font-size: 1em; }
        
        /* --- 登录与移动端适配 --- */
        #login-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,.6); display: flex; justify-content: center; align-items: center; z-index: 100; }
        #login-box { background: var(--panel-bg); padding: 40px; border-radius: 12px; text-align: center; box-shadow: 0 4px 20px rgba(0,0,0,.1); }
        #login-box input { padding: 12px; font-size: 1.1em; border: 1px solid var(--border-color); border-radius: 8px; margin-bottom: 15px; }
        #login-box button { padding: 12px 25px; font-size: 1.1em; background: var(--accent-color); color: white; border: none; border-radius: 8px; cursor: pointer; }
        @media (max-width: 768px) { #sidebar { position: fixed; left: 0; top: 0; width: 80%; max-width: 300px; z-index: 100; transform: translateX(-100%); } body.sidebar-open #sidebar { transform: translateX(0); } #main-chat { transition: filter 0.3s; } body.sidebar-open #main-chat { filter: brightness(0.5); pointer-events: none; } #toggle-users { display: block; position: fixed; top: 15px; left: 15px; z-index: 20; background: var(--accent-color); color: white; border: none; width: 40px; height: 40px; border-radius: 50%; font-size: 20px; cursor: pointer; } }
        @media (min-width: 769px) { #toggle-users { display: none; } }
    </style>
<body>
    <!-- 蛋糕气泡形状定义 -->
    <svg width="0" height="0" style="position:absolute;z-index:-1;">
        <defs>
            <clipPath id="cupcake-clip" clipPathUnits="objectBoundingBox">
                <path d="M0.15,1 C0.25,1.2 0.75,1.2 0.85,1 L1,1 L1,0.15 C0.9,0 0.7,0 0.6,0.15 C0.5,0 0.3,0 0.2,0.15 L0,0.15 L0,1 Z"></path>
            </clipPath>
        </defs>
    </svg>

    <div id="flower-container"></div>
    <div id="login-overlay"><div id="login-box"><h2>Enter your nickname</h2><form id="login-form"><input id="nickname-input" autocomplete="off" required /><br/><button>Join Chat</button></form></div></div>
    <div id="chat-container">
        <div id="sidebar"><h2>Online Users</h2><ul id="user-list"></ul><button id="theme-switcher">✨ 切换到 桐儿生日版</button></div>
        <div id="main-chat"><ul id="messages"></ul><form id="form" action=""><input id="input" autocomplete="off" placeholder="Type a message..." /><button>Send</button></form></div>
    </div>
    <button id="toggle-users">&#9776;</button>

    <!-- 第三部分：JavaScript 脚本将会粘贴在这里 -->
</body>
        <script src="/socket.io/socket.io.js"></script>
    <script>
        // --- 元素选取 ---
        const socket = io();
        const body = document.body;
        const loginOverlay = document.getElementById('login-overlay');
        const loginForm = document.getElementById('login-form');
        const nicknameInput = document.getElementById('nickname-input');
        const form = document.getElementById('form');
        const input = document.getElementById('input');
        const messages = document.getElementById('messages');
        const userList = document.getElementById('user-list');
        const toggleButton = document.getElementById('toggle-users');
        const themeSwitcher = document.getElementById('theme-switcher');
        const flowerContainer = document.getElementById('flower-container');
        let myNickname = '';

               // --- 消息处理器 (修复私信显示) ---
        const createMessageElement = (data) => {
            const item = document.createElement('li');
            const sender = document.createElement('span');
            sender.className = 'message-sender';
            const bubble = document.createElement('div');
            bubble.className = 'message-bubble';
            bubble.textContent = data.msg;

            // 处理系统消息
            if (data.type === 'system') {
                item.className = 'system-message';
                item.textContent = data.msg;
                messages.appendChild(item);
                messages.scrollTop = messages.scrollHeight;
                return;
            }
            
            // 判断是否是自己的消息，并添加对应样式
            if (data.from === myNickname) {
                item.classList.add('my-message');
            } else {
                item.classList.add('their-message');
            }

            // 判断消息类型并生成发送者文本
            if (data.type === 'private') {
                item.classList.add('private-message');
                sender.textContent = `[私信] ${data.from} 对 ${data.to} 说:`;
                // 无论是谁发的私信，都显示发送者
                item.appendChild(sender);
            } else {
                // 公共消息，只有别人的消息才显示发送者
                if (data.from !== myNickname) {
                    sender.textContent = data.from;
                    item.appendChild(sender);
                }
            }
            
            item.appendChild(bubble);
            messages.appendChild(item);
            messages.scrollTop = messages.scrollHeight;
        };

        // --- Socket 事件监听 ---
        socket.on('chat message', (data) => createMessageElement({ ...data, from: data.username, type: 'public' }));
        socket.on('private message', (data) => createMessageElement({ ...data, type: 'private' }));
        socket.on('user joined', (username) => createMessageElement({ msg: `${username} has joined.`, type: 'system' }));
        socket.on('user left', (username) => { if (username) createMessageElement({ msg: `${username} has left.`, type: 'system' }); });

        // --- 更新用户列表 ---
        socket.on('update user list', (users) => {
            userList.innerHTML = '';
            users.forEach(user => {
                const item = document.createElement('li');
                item.textContent = user;
                if (user === myNickname) {
                    item.textContent += ' (You)';
                } else {
                    item.classList.add('can-chat');
                    item.addEventListener('click', () => {
                        const pm = prompt(`发送私信给 ${user}:`);
                        if (pm && pm.trim() !== '') {
                            socket.emit('private message', { to: user, msg: pm });
                        }
                    });
                }
                userList.appendChild(item);
            });
        });

        // --- 表单与按钮事件 ---
        loginForm.addEventListener('submit', (e) => { e.preventDefault(); if (nicknameInput.value) { myNickname = nicknameInput.value; socket.emit('new user', myNickname); loginOverlay.style.display = 'none'; input.focus(); } });
        form.addEventListener('submit', (e) => { e.preventDefault(); if (input.value) { socket.emit('chat message', input.value); input.value = ''; } });
        toggleButton.addEventListener('click', () => body.classList.toggle('sidebar-open'));
        
        // --- 主题与动画逻辑 ---
        const themeOneName = "主题一";
        const catThemeName = "桐儿生日版";

        /* --- 这是要粘贴进去的新代码 --- */
function createFallingFlowers(){
    const flowerTypes = [
        'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTEwLjUgMy43NUMxMC41IDMuMzM1NzkgMTAuODU4MiAzIDExLjI1IDNIMTIuNzVDMTMuMTQxOCAzIDEzLjUgMy4zMzU3OSAxMy41IDMuNzVWNy41SDIxQzIxLjQxNDIgNy41IDIxLjc1IDcuODU4MTcgMjEuNzUgOC4yNUMyMS43NSA4LjY0MTgyIDIxLjQxNDIgOSAyMSA5SDEzLjVWMTBDMTMuNSAxMC41NTA1IDEzLjA1MDUgMTEgMTIuNSAxMUgxMS41QzEwLjk0OTUgMTEgMTAuNSAxMC41NTA1IDEwLjUgMTBWOUgzQzIuNTg1NzkgOSAyLjI1IDguNjQxODIgMi4yNSA4LjI1QzIuMjUgNy44NTgxNyAyLjU4NTc5IDcuNSA3LjVIMTAuNVYzLjc1WiIgZmlsbD0idXJsKCNwYWludDBfbGluZWFyXzIzNV8yKSIvPgo8cGF0aCBkPSJNNiAxOC43NUM2IDE5LjE2NDIgNi4zNTgyIDE5LjUgNi43NSAxOS41SDguMjVDOC42NDE4MyAxOS41IDkgMTkuMTY0MiA5IDE4Ljc1VjE1SDMuNzVDMy4zNTgyMyAxNSAzIDE0LjY0MTggMyAxNC4yNUMzIDEzLjg1ODIgMy4zNTgyMyAxMy41IDMuNzUgMTMuNUg5VjEwSDZDNy42NTY4NSA5IDExIDExLjUgMTEgMTMuNUMxMSAxNS41IDguNzUzNTggMTcuNSAzIDE1QzExIDE1IDEwIDE3LjUgOCAxOC4yNUM2IDE5IDYgMTguNzUgNiAxOC43NVoiIGZpbGw9InVybCgjcGFpbnQxX2xpbmVhcl8yMzVfMikiLz4KPHBhdGggZD0iTTE4IDE4Ljc1QzE4IDE5LjE2NDIgMTcuNjQxOCAxOS41IDE3LjI1IDE5LjVIMTUuNzVDMTUuMzU4MiAxOS41IDE1IDE5LjE2NDIgMTUgMTguNzVWMTVIMjAuMjVDMjAuNjQxOCAxNSAyMSAxNC42NDE4IDIxIDE0LjI1QzIxIDEzLjg1ODIgMjAuNjQxOCAxMy41IDIwLjI1IDEzLjVIMTVWMTBIMThDMTYuMzQzMiA5IDEzIDExLjUgMTMgMTMuNUMxMyAxNS41IDE1LjIxNjMgMTcuNSAyMSA5QzEzIDE1IDE0IDE3LjUgMTYgMTguMjVDMTggMTkgMTggMTguNzUgMTggMTguNzVaIiBmaWxsPSJ1cmwoI3BhaW50Ml9saW5lYXJfMjM1fzIpIi8+CjxkZWZzPgo8bGluZWFyR3JhZGllbnQgaWQ9InBhaW50MF9saW5lYXJfMjM1XzIiIHgxPSIxMiIgeTE9IjMiIHgyPSIxMiIgeTI9IjExIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+CjxzdG9wIHN0b3AtY29sb3I9IiNGRkNBRDAiLz4KPHN0b3Agb2Zmc2V0PSIxIiBzdG9wLWNvbG9yPSIjRkZBRjNCIi8+CjwvbGluZWFyR3JhZGllbnQ+CjxsaW5lYXJHcmFkaWVudCBpZD0icGFpbnQxX2xpbmVhcl8yMzVfMiIgeDE9IjciIHkxPSIxMC41IiB4Mj0iNyIgeTI9IjE5LjUiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIj4KPHN0b3Agc3RvcC1jb2xvcj0iI0ZGQ0FEMCIvPgo8c3RvcCBvZmZzZXQ9IjEiIHN0b9wLWNvbG9yPSIjRkZBRjNCIi8+CjwvbGluZWFyR3JhZGllbnQ+CjxsaW5lYXJHcmFkaWVudCBpZD0icGFpbnQyX2xpbmVhcl8yMzVfMiIgeDE9IjE3IiB5MT0iOS41IiB4Mj0iMTciIHkyPSIxOS41IiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+CjxzdG9wIHN0b3AtY29sb3I9IiNGRkNBRDAiLz4KPHN0b3Agb2Zmc2V0PSIxIiBzdG9wLWNvbG9yPSIjRkZBRjNCIi8+CjwvbGluZWFyR3JhZGllbnQ+CjwvZGVmcz4KPC9zdmc+Cg==',
        'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTExLjM3ODcgMi4yODQ2N0MxMS42NTU0IDEuNzkzNzcgMTIuMzQ0NiAxLjc5Mzc3IDEyLjYyMTMgMi4yODQ2N0wxMy4yMDU2IDMuMzUzNzhDMTMuMzYwMiAzLjYzMTM0IDEzLjY0NTQgMy44MzMxMiAxMy45NTk0IDMuODg5NDVMMTUuMTY4IDQuMDgzOEMxNS45NDQxIDQuMTk5MTIgMTYuNTM3MSA0Ljg4MDQxIDE2LjU2MDcgNS42NjA0MUwxNi42MjE4IDYuODY2MjdDMTYuNjM4MyA3LjE4MTAzIDE2LjgxNzQgNy40NjQ1IDE3LjA5MzggNy42MzYxMkwxOC4xMDM1IDguMzAzMjZDOC44MTA3OCA4Ljc2OTQyIDE5LjAwNTcgOS40NzYxNiAxOC41NjA5IDkuOTk0MzRMMTcuNzQyNyAxMC44MTQ0QzE3LjQ4NjMgMTEuMDcxOCAxNy4zNDc0IDExLjQwNDQgMTcuMzcyMyAxMS43NDEzTDE3LjU0MTkgMTIuOTEzNUMxNy42Njk0IDEzLjY4MDcgMTcuMDg2OCAxNC4zNjEyIDE2LjMyMiAxNC41MDU0TDE1LjI0MjEgMTQuODcyQzE0LjkyMzggMTUuMDA4NiAxNC42NDk0IDE1LjI0MjggMTQuNDgyMyAxNS41MzYxTDEzLjg1ODUgMTYuNTI1MkMxMy40OTEyIDE3LjA0NTggMTIuNjc5NyAxNy4xMTE1IDEyLjExMDggMTYuNjU5MUwxMS4xOTggMTUuODQ4NEMxMC45MTg3IDE1LjYxOTggMTAuNTY4OCAxNS41NTM5IDEwLjI2NjYgMTUuNjc2OEw5LjE2OTk2IDE2LjEyMzlDOC40NDIyMiAxNi40MDE5IDcuNjY0NDkgMTUuOTQ3MSA3LjQ4MTA5IDE1LjE4OEw3LjA4ODU0IDEzLjY3MDZDNi45OTU2OCAxMy4zODY3IDcuMTc2MzEgMTIuOTA0MyA3LjQ5NjMyIDEyLjczODJMNy41OTg1NiAxMi42NDVMMC40ODYxMSAxMC4xMzQ3QzEwLjE0NDcgMTAuNTIwNiAxMC41NTAzIDEwLjI1OTkgMTAuNzQ5NSAxMC4wMzg3TDEyLjY5NzMgNy40MzkxN0MxMi45NjcgNy4wNzY5OCAxMi43NjI5IDYuNTY0NjcgMTIuMzM3MiA2LjQ0NTMyTDExLjAzNSA2LjA1NzgxQzEwLjcwNTQgNS45MzM4IDEwLjQzMzEgNS42NTk1OCAxMC4zMTE5IDUuMzA1MDlMOS43NDEzOCAzLjkwNDk3QzkuNDc5ODQgMy4xNTIxMSA5Ljg4Mjc2IDIuMzI5NDcgMTAuNjQ1IDIuMjMyOTdMMTEuMzc4NyAyLjI4NDY3WiIgZmlsbD0idXJsKCNwYWludDBfbGluZWFyXzIzNV8zKSIvPgo8ZGVmcz4KPGxpbmVhckdyYWRpZW50IGlkPSJwYWludDBfbGluZWFyXzIzNV8zIiB4MT0iMy4wOTMwMiIgeTE9IjExLjQwODciIHgyPSIyMi40MDciIHkyPSIxNC4wMDk2IiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+CjxzdG9wIHN0b3AtY29sb3I9IiNGRkRFNjIiLz4KPHN0b3Agb2Zmc2V0PSIxIiBzdG9wLWNvbG9yPSIjRkZDRTgwIi8+CjwvbGluZWFyR3JhZGllbnQ+CjwvZGVmcz4KPC9zdmc+Cg=='
    ];
    flowerContainer.innerHTML='';
    for(let i=0; i < 20; i++){
        const flower = document.createElement("div");
        flower.classList.add("flower");
        const size = 20 * Math.random() + 15;
        flower.style.width = `${size}px`;
        flower.style.height = `${size}px`;
        flower.style.left = `${100 * Math.random()}%`;
        flower.style.animationDuration = `${8 * Math.random() + 7}s`;
        flower.style.animationDelay = `${10 * Math.random()}s`;
        // ✨ 随机选择一种花瓣
        flower.style.backgroundImage = `url("${flowerTypes[Math.floor(Math.random() * flowerTypes.length)]}")`;
        flowerContainer.appendChild(flower);
    }
}
        function applyTheme(theme){
            if (theme === "cat-theme") {
                body.dataset.theme = "cat-theme";
                themeSwitcher.innerHTML = `✨ 切换到 ${themeOneName}`;
                localStorage.setItem("chat_theme", "cat-theme");
                createFallingFlowers();
            } else {
                body.dataset.theme = "theme-one";
                themeSwitcher.innerHTML = `✨ 切换到 ${catThemeName}`;
                localStorage.setItem("chat_theme", "theme-one");
                flowerContainer.innerHTML = "";
            }
        }
        themeSwitcher.addEventListener('click', () => {
            const current = localStorage.getItem('chat_theme') || 'theme-one';
            applyTheme(current === 'cat-theme' ? 'theme-one' : 'cat-theme');
        });
        document.addEventListener('DOMContentLoaded', () => {
            const saved = localStorage.getItem('chat_theme') || 'theme-one';
            applyTheme(saved);
});
    </script>
</html>
